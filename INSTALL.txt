= OSjava =

This is a work in progress.  Please report any missing steps or
problems.  Please note that Eclipse does not recognize changes done to
the projects (including copying files) until the project has been
"refreshed" (right click the project and select refresh).  The order
is important here otherwise additional steps (refresh and select
additional options) will need to be performed.  Please ensure the
scripts complete successfully before proceeding to the next step.

== Install ==
 * Use an Eclipse with WTP
   * in Ubuntu run sudo eclipse
   * select help > install new software
   * in the "work with: " text box select, "Eclipse Galileo Repository" if available.  
     * If it is not available added by pasting http://download.eclipse.org/releases/galileo/ into text box and click add.
   * Select 
     * "Web, XML, and Java EE Development"
     * "Collaboration"
     * "Programming Languages"
   * For Ubuntu find and unselect
     * Eclipse CVS Client
     * Eclipse Java Development Tools
   * click Next, Accept, Finish.
   * Wait and restart Eclipse
   * If asked on restart select "SVN Kit 1.3.0" and install, restart Eclipse when prompted.
   * Exit Eclipse
 * Clone OSjava
 * Download/Build ThirdParty
    * In OSThirdParty run `sudo bash scripts/install-packages-ubuntu-karmic.sh` or install similar packages for your distribution.
    * In OSThirdParty run `bash scripts/get-third-party.sh` to download and unpack third party jars. -- if the script runs successfully you should see "scripts/get-third-party.sh successful"
	(note: the get-third-party.sh requires a version of tar that supports the option --strip-components)
    * In OSThirdParty run `bash scripts/build-coin-os.sh`
      * alternatively copy OSSolverService binaries to OSThirdParty/lib/coin-or/OSSolverService-(Linux-i686|Linux-x86_64).
 * Optional: install a local version of Tomcat
    * for Ubuntu, in OSThirdParty run `bash scripts/tomcat6-user.sh`
 * Start Eclipse
 * Add a Tomcat 6 "Server" to Eclipse
    * File > New > Other > 'Server' > 'select server type:' > Apache > Tomcat v6.0 Server > Next 
    * Select the Tomcat6 installation
      * Select `download or install` or select a local install of tomcat6 (for Ubuntu tomcat6-user.sh select Browse > Servers/local tomcat6)
      
 * Import the projects OSThirdParty OSCommon and OSServer into eclipse
   * file > import > general > existing projects into workspace > next
   * for "select root directory" use browse to select the OSjava directory
   * select OSThirdParty, OSCommon, OSJavaExamples,  and OSServer and click finish.

 * Configure projects.  In the 'package' window right click each project and do the following for each project:
   * OSThirdParty
     * project > properties > Project Facets > select: Java; Utility Module
   * OSCommon
     * project > properties > Project Facets > select: Java; Utility Module
   * OSServer
     * project > properties > Project Facets > select: Java; Dynamic Web Module > OK (do not skip OK)
     * project > properties > Java EE Module Dependency > select OSThirdParty and OSCommon
 * To remove "WTP metadata" errors right click on projects and select "validate"

 * Start Server
   * Right click server and select `add or remove` and add `OSServer`
   * Right click server and select start.
   * Errors will be directed to the `console` view

 * Test server
   * in OSServer/test run `bash test.sh` or `test.cmd` for Windows.


 * Deploy to the server
   * Right click on the OSServer package and select export
   * Under Web select "WAR file"
   * Select "Next" and then save the WAR file in the webapps directory in the Tomcat root directory
   * Copy the OSSolverService executable to webapps/OSServer/WEB-INF/classes
   * start the server
   * in OSServer/test run `bash test.sh` or `test.cmd` for Windows.
   * (if necessary) add grant tomcat6 policies in OSServer/doc/tomcat6-policy.txt
